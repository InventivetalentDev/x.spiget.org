$(document).ready(function(){window.Shortener={type:"resources",findValue:function(b){$value=$("#text-value").val();1>$value.trim().length?b&&b([]):(console.log("Searching "+Shortener.type+"/"+$value),$.ajax({url:"https://api.spiget.org/v2/search/"+Shortener.type+"/"+$value+"?callback=?",dataType:"jsonp",success:function(a){"error"in a?(Shortener.valueFound=!1,console.log("Not Found"),console.info(a),$("#text-value").addClass("notFound")):(console.info("Found multiple"),console.info(a),Shortener.availableValues=
[],$.each(a,function(b,a){var d=!1;$.each(Shortener.values,function(b,c){c.id==a.id&&(d=!0)});d||void 0!==a.name&&void 0!==a.id&&Shortener.availableValues.push({value:a.name,data:a.id})}),b&&b(),$("#text-value").removeClass("notFound"))},error:function(a){Shortener.valueFound=!1;console.log("Not Found");console.info(a);$("#text-value").addClass("notFound")}}))},lastValue:null,valueFound:!1,isTyping:!1,isTypingTimer:null,firstSearch:!0,availableValues:[],values:[],makeUrl:function(){var b=("resources"==
Shortener.type?"r":"a")+".spiget.org",a="",c="";$.each(Shortener.values,function(b,d){a+="/"+d.name;c+="/"+d.id});a=b+a;c=b+c;console.info(a);$("#names-output").val(a);console.info(c);$("#ids-output").val(c);$("#names-go-button").prop("disabled",!1);$("#ids-go-button").prop("disabled",!1)}};$("#type-select").on("change",function(){Shortener.type=$(this).val()});$("#text-value").on("keyup",function(){isTypingTimer=setTimeout(function(){Shortener.isTyping=!1},100)});$("#text-value").on("keydown",function(){clearTimeout(Shortener.isTypingTimer);
Shortener.isTyping=!0});$("#text-value").autocomplete({triggerSelectOnValidInput:!1,lookup:function(b,a){Shortener.findValue(function(){console.log(Shortener.availableValues);a({suggestions:Shortener.availableValues})})},onSelect:function(b){console.info("On select: "+b);Shortener.values.push({name:b.value,id:b.data});Shortener.makeUrl();$("#text-value").fadeOut(function(){$("#text-value").val("");$("#text-value").fadeIn()});$("#type-select").prop("disabled",!0)}});$("#add-button").click(function(b){b.preventDefault()});
$("#names-go-button").click(function(){5<$("#names-output").val().length&&open("https://"+$("#names-output").val(),"_blank")});$("#ids-go-button").click(function(){5<$("#ids-output").val().length&&open("https://"+$("#ids-output").val(),"_blank")});Shortener.findValue()});
